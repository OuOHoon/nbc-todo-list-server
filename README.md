# 테스트 코드 추가 과제

## 요구사항 구현 목록

- [x] DTO, Entity Test 추가하기
   - Jackson<->Object 변환, 비즈니스 로직을 테스트 했습니다.
- [x] Controller Test 추가하기
   - CardController의 일부 메서드만 테스트 했습니다.
- [x] Service Test 추가하기
  - 테스트하지 못한 메서드가 일부 남아있습니다
- [x] Repository Test 추가하기
   - 쿼리 메서드로 정의한 메서드만 테스트 했습니다.
- [x] 통합 테스트 일부 구현, Jacoco 추가
   - 회원가입, 로그인, 할일 생성, 댓글 달기 메서드만 테스트 했습니다.
  

<img width="1114" alt="image" src="https://github.com/OuOHoon/nbc-todo-list-server/assets/17760465/d4b6546a-e248-44ae-b1b9-c1178e3acee0">


## Why: 과제 제출시에는 아래 질문을 고민해보고 답변을 함께 제출해주세요.

### 1. 통합 테스트와 단위 테스트의 차이점에 대해서 설명해주세요.
- 통합 테스트는 모든 빈을 등록하고, 단위 테스트는 필요한 빈만 Mocking 합니다.

### 2. 통합 테스트과 단위 테스트의 장/단점에 대해서 설명해주세요.
- 통합 테스트는 모든 빈을 등록하기 때문에 운영 환경과 가장 비슷한 환경에서 테스트가 가능하고, E2E 테스트가 가능한 장점이 있습니다.
- 단점으로는 모든 빈을 등록하기 때문에 테스트에 시간이 오래 걸리고, 모든 테스트를 한 번에 실행하기 때문에 디버깅이 어렵습니다.

- 단위 테스트는 테스트 대상 클래스가 의존하는 클래스를 Mock 객체로 만들어서 테스트 하기 때문에 통합 테스트에 비해 테스트 속도가 빠르고, 비즈니스 로직에 집중하여 테스트 할 수 있습니다.
- 단점으로는 의존하는 클래스를 Mock 객체로 만들어서 테스트 하기 때문에, 실제로 완벽한 테스트가 아닐 수 있습니다.

### 3. 레이어별로 나누어서 Slice Test 를 하는 이유에 대해서 설명해주세요.
- 필요한 부분만 실행하여 테스트 시간을 단축시킵니다.
- 디버깅이 쉽습니다.

### 4. 테스트 코드를 직접 짜보고 나서 느낀 테스트 필요성을 적어주세요.
- 테스트에 필요한 값을 설정하는데 시간이 들지만 안전한 코드를 작성하는데는 필요하다고 생각했습니다.
- 테스트에 걸리는 시간보다 발견하지 못한 버그를 추후에 해결하는데 걸리는 시간이 더 많이 필요하기 때문입니다.
- 테스트 하기 힘든 코드를 발견하면 객체지향적으로 개발하고 있는지 생각하는 기회가 됐습니다.

### 5. 테스트 코드를 짜면서 어려웠던 점을 적어주세요.
- 컨트롤러의 단위 테스트 코드를 작성할 때, 컨트롤러에서 작성된 코드에서 응답 코드를 제외한 다른 코드는 모두 이미 단위 테스트를 진행한 코드였습니다. 이런 중복 테스트 코드는 어떻게 처리해야 할지 고민했습니다. 각각의 테스트 메서드가 그 자체로 완전해야 할지 고민하다가 중복을 없애는 것이 더 효율적이라고 생각했습니다.
- 테스트 코드의 적절한 이름 짓기가 어려웠습니다. 테스트에 대한 정보를 많이 전달하면 가독성이 떨어지고 짧게 전달하면 가독성은 좋지만 테스트의 자세한 정보는 알기 어려웠습니다.




---
# nbc-todo-list-server
<aside>
❓ **Why: 과제 제출시에는 아래 질문을 고민해보고 답변을 함께 제출해주세요.**

</aside>

1. 처음 설계한 API 명세서에 변경사항이 있었나요?
   변경 되었다면 어떤 점 때문 일까요? 첫 설계의 중요성에 대해 작성해 주세요! <br>
프로젝트를 새로 만들어서 변경한건 아니지만, 변경했다고 생각하고 답변하자면 API의 명세의 큰 틀(URI)은 달라지지 않았고 세부적인 값(요청, 응답)만 변경되었습니다.

2. ERD를 먼저 설계한 후 Entity를 개발했을 때 어떤 점이 도움이 되셨나요?<br>
Entity를 설계하고 연관관계를 설정하기 쉬웠습니다.

3. JWT를 사용하여 인증/인가를 구현 했을 때의 장점은 무엇일까요?<br>
Stateless인게 가장 큰 장점입니다. 서버가 상태를 저장/관리할 필요가 없습니다.

4. 반대로 JWT를 사용한 인증/인가의 한계점은 무엇일까요?<br>
토큰을 탈취당했을 때, 대처할 수 있는 방법이 없습니다. 그래서 access token, refreshtoken을 사용하면 결국 세션보단 덜하지만 상태를 갖게 됩니다. 그리고 payload가 커질수록 네트워크 비용이 커집니다.

5. 만약 댓글이 여러개 달려있는 할일을 삭제하려고 한다면 무슨 문제가 발생할까요?<br>
무결성 제약 조건에 위배됩니다.

6. Database 테이블 관점에서 해결방법이 무엇일까요?<br>
할일과 연관관계를 갖고 있는 댓글을 삭제하려고 한다면 데이터베이스 설정에 따라 댓글을 모두 삭제한 후에 할일을 삭제하거나, 자동으로 연관된 모든 댓글을 삭제하거나 합니다.

8. IoC / DI 에 대해 간략하게 설명해 주세요!<br>
IoC는 제어의 역전으로 개발자가 객체를 생성하고 사용하는게 아니라, 프레임워크에 객체의 라이프사이클 관리를 위임하고, 객체를 주입받아 사용하는 것을 말합니다.
DI는 IoC의 한 종류로, 생성자 주입, 필드 주입, 메서드 주입같은 방법으로 객체를 갖지 않고 주입받아 사용하는 것을 말합니다.

## ERD
<img width="735" alt="image" src="https://github.com/OuOHoon/nbc-todo-list-server/assets/17760465/c5878edb-0c89-41fa-b638-1c6bd5f3bce6">

## API 명세서
Swagger로 생성한 API 명세입니다. Jwt Authorize 설정은 추가하려고 찾아보는 중입니다 ㅎㅎ..
<img width="1461" alt="image" src="https://github.com/OuOHoon/nbc-todo-list-server/assets/17760465/2e2b21e0-cdfa-47ff-87b8-351bec68a26c">

<img width="1399" alt="image" src="https://github.com/OuOHoon/nbc-todo-list-server/assets/17760465/5e73d88b-bfe7-40b8-afb3-045a80916234">
